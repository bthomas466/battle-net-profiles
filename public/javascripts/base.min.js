var express=require("express"),path=require("path"),favicon=require("serve-favicon"),logger=require("morgan"),cookieParser=require("cookie-parser"),bodyParser=require("body-parser"),routes=require("./routes/index"),users=require("./routes/users"),profile=require("./routes/profile"),app=express();app.set("views",path.join(__dirname,"views")),app.set("view engine","jade"),app.use(logger("dev")),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.use(cookieParser()),app.use(express["static"](path.join(__dirname,"public"))),app.use("/",routes),app.use("/users",users),app.use("/profile",profile),app.use(function(e,r,t){var s=new Error("Not Found");s.status=404,t(s)}),"development"===app.get("env")&&app.use(function(e,r,t,s){t.status(e.status||500),t.render("error",{message:e.message,error:e})}),app.use(function(e,r,t,s){t.status(e.status||500),t.render("error",{message:e.message,error:{}})}),module.exports=app;var battlenetApp=angular.module("battlenetApp",["ui.bootstrap"]);battlenetApp.factory("idAndName",["$http",function(e){return{getProfile:function(r,t){return e.get("https://us.api.battle.net/sc2/profile/"+r+"/1/"+t+"/?locale=en_US&apikey=pshyp9tgvegq2wuftgu4pu9femmpgbcj").then(function(e){return e.data})["catch"](function(e){console.log("Something broke",e.status,e.data)})},getMatches:function(r,t){return e.get("https://us.api.battle.net/sc2/profile/"+r+"/1/"+t+"/matches?locale=en_US&apikey=pshyp9tgvegq2wuftgu4pu9femmpgbcj").then(function(e){return e.data.matches})["catch"](function(e){console.log("Something broke",e.status,e.data)})}}}]),battlenetApp.controller("GetUserInformationCtrl",["$scope","idAndName",function(e,r){e.processForm=function(){r.getProfile(e.id,e.name).then(function(r){e.profile=r;var t=angular.element(document.querySelector(".bg-wrap"));t.addClass("dark");var s=angular.element(document.querySelector(".battle-net-form"));s.addClass("fixed-top"),e.zergMax=e.profile.swarmLevels.zerg.totalLevelXP,e.zergCurrent=e.profile.swarmLevels.zerg.currentLevelXP,-1==e.zergCurrent&&($sope.zergCurrent=585e4),e.terranMax=e.profile.swarmLevels.terran.totalLevelXP,e.terranCurrent=e.profile.swarmLevels.terran.currentLevelXP,-1==e.terranCurrent&&(e.terranCurrent=585e4),e.protossMax=e.profile.swarmLevels.protoss.totalLevelXP,e.protossCurrent=e.profile.swarmLevels.protoss.currentLevelXP,-1==e.protossCurrent&&(e.protossCurrent=585e4)}),r.getMatches(e.id,e.name).then(function(r){e.matches=r})}}]);