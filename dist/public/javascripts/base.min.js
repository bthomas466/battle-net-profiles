var express=require("express"),path=require("path"),favicon=require("serve-favicon"),logger=require("morgan"),cookieParser=require("cookie-parser"),bodyParser=require("body-parser"),routes=require("./routes/index"),users=require("./routes/users"),profile=require("./routes/profile"),app=express();app.set("views",path.join(__dirname,"views")),app.set("view engine","jade"),app.use(logger("dev")),app.use(bodyParser.json()),app.use(bodyParser.urlencoded({extended:!1})),app.use(cookieParser()),app.use(express["static"](path.join(__dirname,"public"))),app.use("/",routes),app.use("/users",users),app.use("/profile",profile),app.use(function(e,r,t){var a=new Error("Not Found");a.status=404,t(a)}),"development"===app.get("env")&&app.use(function(e,r,t,a){t.status(e.status||500),t.render("error",{message:e.message,error:e})}),app.use(function(e,r,t,a){t.status(e.status||500),t.render("error",{message:e.message,error:{}})}),module.exports=app;var battlenetApp=angular.module("battlenetApp",["ui.bootstrap","oitozero.ngSweetAlert"]);battlenetApp.factory("idAndName",["$http","SweetAlert",function(e,r){return{getProfile:function(t,a){return e.get("https://us.api.battle.net/sc2/profile/"+t+"/1/"+a+"/?locale=en_US&apikey=pshyp9tgvegq2wuftgu4pu9femmpgbcj").then(function(e){return e.data})["catch"](function(e){console.log("Something broke",e.status,e.data),r.swal("Oops","Something went wrong.  Please try again","error")})},getMatches:function(r,t){return e.get("https://us.api.battle.net/sc2/profile/"+r+"/1/"+t+"/matches?locale=en_US&apikey=pshyp9tgvegq2wuftgu4pu9femmpgbcj").then(function(e){return e.data.matches})["catch"](function(e){console.log("Something broke",e.status,e.data)})}}}]),battlenetApp.controller("GetUserInformationCtrl",["$scope","$timeout","idAndName",function(e,r,t){e.processForm=function(){t.getProfile(e.id,e.name).then(function(t){e.profile=t,e.zergMax=e.profile.swarmLevels.zerg.totalLevelXP,e.zergCurrent=e.profile.swarmLevels.zerg.currentLevelXP,-1==e.zergCurrent&&(e.zergCurrent=585e4),e.terranMax=e.profile.swarmLevels.terran.totalLevelXP,e.terranCurrent=e.profile.swarmLevels.terran.currentLevelXP,-1==e.terranCurrent&&(e.terranCurrent=585e4),e.protossMax=e.profile.swarmLevels.protoss.totalLevelXP,e.protossCurrent=e.profile.swarmLevels.protoss.currentLevelXP,-1==e.protossCurrent&&(e.protossCurrent=585e4);var a=["Rendezvous_SC2_Art1.jpg","ui_hots_loading_missionselect_zexpedition01.jpg","ui_hots_loading_planetviewkorhal.jpg","maxresdefault.jpg","free-wallpaper-14.jpg","best_game_starcraft_2_wallpapers_hd_10.jpg","starcraft-2-battle-1920-1080-6284.jpg"],s=angular.element(document.querySelector(".career-wrapper"));s.css("background-image","url(images/"+a[Math.floor(Math.random()*a.length)]+")");var o=angular.element(document.querySelector(".battle-net-form"));o.addClass("fixed-top-hide"),r(function(){var e=angular.element(document.querySelector(".bg-wrap"));e.addClass("dark"),o.removeClass("fixed-top-hide"),o.addClass("fixed-top-show")},875)}),t.getMatches(e.id,e.name).then(function(t){r(function(){e.matches=t},1750)})}}]);